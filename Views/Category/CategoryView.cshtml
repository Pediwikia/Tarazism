@model List<Tarazism.Models.CategoryItem>
@{
    ViewData["Title"] = Model.FirstOrDefault()?.Category ?? "Category";
}

<section class="py-24 text-center">
    <h1 class="text-5xl font-bold mb-4">@ViewData["Title"]</h1>
    <p class="text-gray-600 dark:text-gray-300">
        Curated selections from the Tarazism archive.
    </p>
</section>

<section class="max-w-screen-xl mx-auto px-4 grid grid-cols-1 md:grid-cols-3 gap-10 mb-20">

    @foreach (var item in Model)
    {
        <div class="category-card bg-white dark:bg-gray-800 shadow rounded-xl overflow-hidden
         hover:shadow-lg transition border border-gray-200 dark:border-gray-700"
             data-title="@item.Title"
             data-tags="@string.Join(",", item.Tags)">

            <img src="@item.ImageUrl" class="h-52 w-full object-cover cursor-pointer quick-view"
                 data-title="@item.Title"
                 data-desc="@item.Description"
                 data-img="@item.ImageUrl"
                 data-rating="@item.Rating" />

            <div class="p-5">
                <h3 class="text-xl font-bold">@item.Title</h3>
                <p class="text-gray-600 dark:text-gray-300 mt-2">@item.Description</p>

                <!-- Tags -->
                <div class="flex flex-wrap gap-2 mt-3">
                    @foreach (var tag in item.Tags)
                    {
                        <span class="px-2 py-1 bg-blue-600 text-white text-sm rounded-md">@tag</span>
                    }
                </div>

                <!-- Rating -->
                <div class="mt-3 text-yellow-400">
                    ⭐ @item.Rating / 5.0
                </div>

                <!-- Favorite Button -->
                <button class="favorite-btn mt-4 px-3 py-2 bg-gray-700 text-white rounded-lg"
                        data-title="@item.Title">
                    ❤️ Add to Favorites
                </button>
            </div>
        </div>
        <!-- Quick View Modal -->
        <div id="quickViewModal" class="hidden fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50">
            <div class="bg-white dark:bg-gray-800 p-6 rounded-lg w-96 shadow-xl relative">

                <button id="closeModal" class="absolute top-3 right-3 text-xl">&times;</button>

                <img id="modalImg" class="w-full h-52 object-cover rounded-md" />

                <h2 id="modalTitle" class="text-2xl font-bold mt-4"></h2>
                <p id="modalDesc" class="text-gray-600 dark:text-gray-300 mt-2"></p>

                <div class="mt-4 text-yellow-400" id="modalRating"></div>
            </div>
        </div>

    }

</section>
<!-- Filters -->
<div class="flex flex-wrap items-center justify-between mb-10 gap-4">

    <!-- Search -->
    <input id="searchInput" type="text"
           placeholder="Search titles…"
           class="w-full md:w-1/3 p-2 border dark:border-gray-600
                  rounded-lg bg-gray-50 dark:bg-gray-800">

    <!-- Tag Filter -->
    <button id="tagFilterBtn" data-dropdown-toggle="tagDropdown"
            class="px-4 py-2 bg-blue-600 text-white rounded-lg shadow hover:bg-blue-700">
        Filter by Tag
    </button>

    <div id="tagDropdown"
         class="hidden z-20 w-48 bg-white dark:bg-gray-800 rounded-lg shadow p-3">

        <ul class="space-y-2 text-gray-700 dark:text-gray-200">
            <li><button class="tag-option" data-tag="Anime">Anime</button></li>
            <li><button class="tag-option" data-tag="Books">Books</button></li>
            <li><button class="tag-option" data-tag="Games">Games</button></li>
            <li><button class="tag-option" data-tag="Philosophy">Philosophy</button></li>
            <li><button class="tag-option" data-tag="Photography">Photography</button></li>
            <li><button class="tag-option" data-tag="Adventure">Adventure</button></li>
        </ul>
    </div>

</div>
